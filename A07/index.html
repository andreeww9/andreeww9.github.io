<!doctype html>
<html lang="en" style="height: 100%;">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Digimon Finder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex: 1;
        }

        footer {
            background-color: rgb(70, 78, 81);
            color: white;
        }
    </style>
</head>

<body>
    <main>
        <div class="container-fluid py-5 header-bg">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-auto">
                        <div class="h1 text-white text-center">Digimon Finder</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mt-5">
            <div class="row">
                <div class="col">
                    <div class="card form-card mx-auto text-center">
                        <form>
                            <input type="text" class="form-control rounded-5 p-2 mb-3" id="digimonNameSearch"
                                placeholder="Enter Digimon name">
                            <input onclick="getDigimon()" type="button"
                                class="btn btn-primary rounded-5 py-2 px-4 fw-semibold" value="Search">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mt-4" id="digimonMainContainer" style="display: none;">
            <div class="row">
                <div class="col">
                    <div class="card result-card text-center mx-auto">
                        <div class="picture-container mx-auto mb-4" id="picture-container">
                            <img src="" id="img" alt="Digimon Image">
                        </div>
                        <div class="h5 fw-bold" id="name">Digimon Name</div>
                        <div class="mt-2 badge bg-primary text-white fs-6 px-3 py-2" id="level">Level: Rookie</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="text-center py-4 mt-auto">
        <a href="../index.html" class="btn btn-outline-light mt-3">Back</a>
    </footer>

    <script>
        const getDigimon = async () => {
            const nameInput = document.getElementById("digimonNameSearch").value.trim().toLowerCase();
            const resultContainer = document.getElementById("digimonMainContainer");
            const nameDisplay = document.getElementById("name");
            const levelDisplay = document.getElementById("level");
            const imageDisplay = document.getElementById("img");

            if (!nameInput) {
                alert("Please enter a Digimon name.");
                return;
            }

            try {
                const res = await fetch(`https://digi-api.com/api/v1/digimon/${nameInput}`);
                if (!res.ok) throw new Error("Digimon not found");

                const data = await res.json();

                nameDisplay.textContent = `#${data.id} ${data.name}`;
                levelDisplay.textContent = `Level: ${data.levels?.[0]?.level || 'Unknown'}`;
                imageDisplay.src = data.images?.[0]?.href || "https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg";

                resultContainer.style.display = "block";
            } catch (error) {
                resultContainer.style.display = "none";
                alert("Digimon not found. Try names like agumon, gabumon, etc.");
                console.error(error);
            }
        };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>